# Step 1: Compile C code to RISC-V assembly
riscv64-unknown-elf-gcc -S -march=rv64i -mabi=lp64 -O2 test.c -o test.s

# Step 2: Assemble to object file
riscv64-unknown-elf-as -march=rv64i -mabi=lp64 test.s -o test.o

# Step 3: Link and create ELF
riscv64-unknown-elf-ld -Ttext=0x0 test.o -o test.elf

# Step 4: Extract machine code for simulation
riscv64-unknown-elf-objcopy -O verilog --verilog-data-width=1 test.elf program.hex